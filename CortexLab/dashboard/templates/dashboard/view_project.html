{% extends 'main/dashboard_home.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dashboard/css/dashboard.css' %}">
{% endblock %}

{% block content %}
<h2>Détails du Projet</h2>
<p>Nom du projet : {{ project.name }}</p>
<p>Type de modèle : {{ project.get_model_type_display }}</p>

<!-- Formulaire pour téléverser des données -->
<form id="uploadForm" method="post" enctype="multipart/form-data" data-url="{% url 'dashboard:analyze_data' project.id %}">
    {% csrf_token %}
    <label for="file">Télécharger vos données (CSV ou Excel) :</label>
    <input type="file" id="file" name="file" accept=".csv, .xls, .xlsx" required>
    <button type="submit">Télécharger et Analyser</button>
</form>

<!-- Sélection du type de modèle -->
<form id="modelTypeForm" method="post" data-url="{% url 'dashboard:set_model_type' project.id %}">
    {% csrf_token %}
    <label for="model_type">Choisissez un type de modèle :</label>
    <select name="model_type" id="model_type" required>
        <option value="" disabled {% if not project.model_type %}selected{% endif %}>-- Sélectionnez un type de modèle --</option>
        <option value="clustering" {% if project.model_type == "clustering" %}selected{% endif %}>Clustering</option>
        <option value="regression" {% if project.model_type == "regression" %}selected{% endif %}>Régression</option>
        <option value="classification" {% if project.model_type == "classification" %}selected{% endif %}>Classification</option>
    </select>
    <button type="submit">Enregistrer le modèle</button>
</form>

<!-- Affichage des colonnes détectées -->
<div id="columnsSection" style="display: none;">
    <h3>Colonnes détectées :</h3>
    <ul id="columnsList"></ul>
</div>

<!-- Formulaire pour sélectionner la target -->
<form id="targetForm" method="post" data-url="{% url 'dashboard:set_target' project.id %}" style="display: none;">
    {% csrf_token %}
    <label for="target">Sélectionnez la colonne cible (target) :</label>
    <select name="target" id="target" required></select>
    <button type="submit">Définir la Target</button>
</form>

<!-- Formulaire pour sélectionner les features -->
<form id="featuresForm" method="post" data-url="{% url 'dashboard:set_features' project.id %}" style="display: none;">
    {% csrf_token %}
    <h3>Sélectionnez les colonnes de caractéristiques (features) :</h3>
    <div id="featuresList"></div>
    <button type="submit">Définir les Features</button>
</form>

<script src="{% static 'dashboard/js/dashboard.js' %}"></script>
{% endblock %}
